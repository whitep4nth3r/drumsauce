---
import Tags from "./Tags.astro";
import Description from "./Description.astro";
const { transcription } = Astro.props;
---

<div class="card">
  <div class="image">
    <img
      style={`view-transition-name: album-cover-${transcription.slug};`}
      alt={`Album cover for ${transcription.song} by ${transcription.artist}`}
      height="250"
      width="250"
      loading="lazy"
      src={`https://coverartarchive.org/release/${transcription.mbReleaseId}/front-250`}
    />
  </div>
  <div class="inner">
    <Tags genre={transcription.genre} live={transcription.live} />
    <div class="song__wrapper">
      <h2 class="song" style={`view-transition-name: ${transcription.slug}`}>
        {transcription.song}
      </h2>
    </div>
    <h3 class="artist__album">
      {transcription.artist} / {transcription.album} / {transcription.year}
    </h3>
    <Description text={transcription.description} />
    <a
      class="get"
      href={`/transcriptions/${transcription.slug}`}
      aria-label={`Get PDF transcription for ${transcription.song} by ${transcription.artist}`}
    >
      Get transcription
    </a>
  </div>
</div>

<style>
  .card {
    width: 100%;
    text-decoration: none;
    display: grid;
    grid-template-columns: 1fr 2fr;
    align-items: center;
    justify-content: space-between;
    border-radius: var(--border-radius-base);
    border: 0.25rem solid var(--color-fg);
  }

  .inner {
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    background-color: var(--color-bg);
  }

  .song__wrapper {
    display: flex;
    justify-content: flex-start;
  }

  .song {
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    line-height: 1.1;
    margin: 0;
  }

  .artist__album {
    display: flex;
    align-items: center;
    line-height: 1.2;
    font-size: clamp(1.25rem, 3vw, 1.75rem);
    font-weight: 400;
    color: var(--color-fg);
  }

  .image {
    aspect-ratio: 1 / 1;
    width: 100%;
    height: 100%;
    overflow: hidden;
    display: block;
    position: relative;
    background: var(--color-accent);
  }

  .image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .get {
    text-transform: uppercase;
    display: inline-block;
    padding: 0.75rem 1.5rem;
    border: 0.15rem solid var(--color-fg);
    border-radius: var(--border-radius-base);
    text-decoration: none;
    font-weight: 600;
    color: var(--color-fg);
    width: max-content;
  }

  .get:hover,
  .get:focus,
  .get:focus-visible {
    outline: 0.25rem solid var(--color-accent);
    outline-offset: 0;
  }
</style>
